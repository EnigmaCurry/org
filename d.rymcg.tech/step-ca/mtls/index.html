<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.123.7">
    <meta name="generator" content="Relearn 6.0.0+tip">
    <meta name="description" content="Enable mTLS in Trafeik config Traefik needs to install the root CA certificate in order to trust your client certificates.
In the d make traefik config menu, choose Configure Certificate Authorities (CA). You need to import your Step-CA root certificate into your Traefik container’s trust store. Choose one of the options that does this, and it will prompt you for the endpoint and fingerprint.
Endpoint: https://ca.example.com Fingerprint: get this by running make inspect-fingerprint in the step-ca project.">
    <meta name="author" content="">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Mutual TLS :: book.rymcg.tech">
    <meta name="twitter:description" content="Enable mTLS in Trafeik config Traefik needs to install the root CA certificate in order to trust your client certificates.
In the d make traefik config menu, choose Configure Certificate Authorities (CA). You need to import your Step-CA root certificate into your Traefik container’s trust store. Choose one of the options that does this, and it will prompt you for the endpoint and fingerprint.
Endpoint: https://ca.example.com Fingerprint: get this by running make inspect-fingerprint in the step-ca project.">
    <meta property="og:url" content="https://book.rymcg.tech/d.rymcg.tech/step-ca/mtls/index.html">
    <meta property="og:site_name" content="book.rymcg.tech">
    <meta property="og:title" content="Mutual TLS :: book.rymcg.tech">
    <meta property="og:description" content="Enable mTLS in Trafeik config Traefik needs to install the root CA certificate in order to trust your client certificates.
In the d make traefik config menu, choose Configure Certificate Authorities (CA). You need to import your Step-CA root certificate into your Traefik container’s trust store. Choose one of the options that does this, and it will prompt you for the endpoint and fingerprint.
Endpoint: https://ca.example.com Fingerprint: get this by running make inspect-fingerprint in the step-ca project.">
    <meta property="og:locale" content="en-us">
    <meta property="og:type" content="article">
    <meta property="article:section" content="Self-hosting Docker with d.rymcg.tech">
    <meta itemprop="name" content="Mutual TLS :: book.rymcg.tech">
    <meta itemprop="description" content="Enable mTLS in Trafeik config Traefik needs to install the root CA certificate in order to trust your client certificates.
In the d make traefik config menu, choose Configure Certificate Authorities (CA). You need to import your Step-CA root certificate into your Traefik container’s trust store. Choose one of the options that does this, and it will prompt you for the endpoint and fingerprint.
Endpoint: https://ca.example.com Fingerprint: get this by running make inspect-fingerprint in the step-ca project.">
    <meta itemprop="wordCount" content="932">
    <title>Mutual TLS :: book.rymcg.tech</title>
    <link href="/css/fontawesome-all.min.css?1718170891" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/css/fontawesome-all.min.css?1718170891" rel="stylesheet"></noscript>
    <link href="/css/nucleus.css?1718170891" rel="stylesheet">
    <link href="/css/auto-complete.css?1718170891" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/css/auto-complete.css?1718170891" rel="stylesheet"></noscript>
    <link href="/css/perfect-scrollbar.min.css?1718170891" rel="stylesheet">
    <link href="/css/fonts.css?1718170891" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/css/fonts.css?1718170891" rel="stylesheet"></noscript>
    <link href="/css/theme.css?1718170891" rel="stylesheet">
    <link href="/css/theme-zen-auto.css?1718170891" rel="stylesheet" id="R-variant-style">
    <link href="/css/chroma-zen-auto.css?1718170891" rel="stylesheet" id="R-variant-chroma-style">
    <link href="/css/variant.css?1718170891" rel="stylesheet">
    <link href="/css/print.css?1718170891" rel="stylesheet" media="print">
    <script src="/js/variant.js?1718170891"></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.relBasePath='..\/..\/..';
      window.relearn.relBaseUri='..\/..\/..';
      window.relearn.absBaseUri='https:\/\/book.rymcg.tech';
      window.index_js_url="/index.search.js";
      // variant stuff
      window.variants && variants.init( [ 'zen-auto', 'zen-light', 'zen-dark', 'relearn-auto', 'relearn-light', 'relearn-dark', 'relearn-bright', 'neon', 'learn', 'blue', 'green', 'red' ] );
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
    </script><link href="/css/custom.css" rel="stylesheet">

  </head>
  <body class="mobile-support html" data-url="/d.rymcg.tech/step-ca/mtls/index.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>
            <div class="topbar-button topbar-button-toc" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="Table of Contents (CTRL&#43;ALT&#43;t)"><i class="fa-fw fas fa-list-alt"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper"><nav class="TableOfContents">
  <ul>
    <li><a href="#enable-mtls-in-trafeik-config">Enable mTLS in Trafeik config</a></li>
    <li><a href="#enable-mtls-for-an-app">Enable mTLS for an app</a></li>
    <li><a href="#in-app-authorization">In-app Authorization</a></li>
    <li><a href="#creating-client-certificates">Creating client certificates</a></li>
    <li><a href="#naming-client-certificates--cn">Naming client certificates (CN)</a></li>
    <li><a href="#testing-tls-with-curl">Testing TLS with curl</a></li>
    <li><a href="#test-the-root-ca">Test the root CA</a></li>
    <li><a href="#test-mtls">Test mTLS</a></li>
  </ul>
</nav>
                </div>
              </div>
            </div>
          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="/index.html"><span itemprop="name">book.rymcg.tech</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="/d.rymcg.tech/index.html"><span itemprop="name">Self-hosting Docker</span></a><meta itemprop="position" content="2">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="/d.rymcg.tech/step-ca/index.html"><span itemprop="name">Step-CA</span></a><meta itemprop="position" content="3">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><span itemprop="name">Mutual TLS</span><meta itemprop="position" content="4"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/d.rymcg.tech/step-ca/acme/index.html" title="ACME (🡐)"><i class="fa-fw fas fa-chevron-left"></i></a>
            </div>
            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/publishing-with-org-mode/index.html" title="Publishing with org-mode (🡒)"><i class="fa-fw fas fa-chevron-right"></i></a>
            </div>
            <div class="topbar-button topbar-button-more" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="More"><i class="fa-fw fas fa-ellipsis-v"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
                  <div class="topbar-area topbar-area-more" data-area="more">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="default">
            <header class="headline">
            </header>

<h1 id="mutual-tls">Mutual TLS</h1>

<h2 id="enable-mtls-in-trafeik-config">Enable mTLS in Trafeik config</h2>
<p>Traefik needs to install the root CA certificate in order to trust
your client certificates.</p>
<p>In the <code>d make traefik config</code> menu, choose <code>Configure Certificate Authorities (CA)</code>. You need to import your Step-CA root certificate
into your Traefik container&rsquo;s trust store. Choose one of the options
that does this, and it will prompt you for the endpoint and
fingerprint.</p>
<ul>
<li>Endpoint: <code>https://ca.example.com</code></li>
<li>Fingerprint: get this by running <code>make inspect-fingerprint</code> in the step-ca project.</li>
</ul>
<p>Strong mTLS depends on both the client and server using certificates
from the same CA chain. However, you can relax that if you want. It
does not technically matter what ACME provider the server uses, it can
use Let&rsquo;s Encrypt, or Step-CA. The clients will be using Step-CA, but
they likely already have the Let&rsquo;s Encrypt CA trusted too (because of
the operating system and browser bundled CAs), so either will work. In
some cases that will be preferred, because clients won&rsquo;t need to add
modify their trust store, just add a single client certificate.</p>
<h2 id="enable-mtls-for-an-app">Enable mTLS for an app</h2>
<p>Most d.rymcg.tech apps have been made compatible with mTLS sentry
authentication. In each of their respective <code>make config</code> menus, there
is the option to turn on mTLS authentication:</p>
<div class="box notices cstyle stdout">
    <div class="box-label">(stdout)</div>
    <div class="box-content">
        <pre>
? Do you want to enable sentry authentication in front of this app (effectively making the entire site private)?
  No
  Yes, with HTTP Basic Authentication
  Yes, with Oauth2
> Yes, with Mutual TLS (mTLS)
</pre>
    </div>
</div>

<p>Choosing this option enables mTLS for the given app. The next question
asks about what certificates it should allow in.</p>
<div class="box notices cstyle stdout">
    <div class="box-label">(stdout)</div>
    <div class="box-content">
        <pre>
NGINX_MTLS_AUTHORIZED_CERTS: Enter comma separated list of allowed client certificate names (or blank to allow all) (eg. *.clients.www.example.com)

: *.clients.whoami.test.rymcg.tech,bob.geocities.com
</pre>
    </div>
</div>

<p>In the example above, it would only let users in if the fit all of the following criteria:</p>
<ul>
<li>The user must present a valid TLS certicate for all HTTP requests.
(eg. with curl <code>--cacert</code>, <code>--cert</code>, <code>--key</code> options) and it must be
signed by your own Step-CA instance.</li>
<li>The client certificate name (CN) value must match the list of
<code>NGINX_MTLS_AUTHORIZED_CERTS</code> (wildcards allowed), comma separated.</li>
</ul>
<p>So any of these clients are allowed access, assuming they are signed
by our Step-CA instance, and because they match the list of authorized
domains:</p>
<ul>
<li>✅ <code>bob.clients.whoami.test.rymcg.tech</code></li>
<li>✅ <code>alice.clients.whoami.test.rymcg.tech</code></li>
<li>✅ <code>ANYTHING.clients.whoami.test.rymcg.tech</code></li>
<li>✅ <code>bob.geocities.com</code></li>
</ul>
<p>None, of these clients are allowed access, not only because they
wouldn&rsquo;t be signed by our Step-CA instance, but also because they
don&rsquo;t match our list of authorized domains:</p>
<ul>
<li>❌ <code>thing2.rymcg.tech</code></li>
<li>❌ <code>ads.google.com</code></li>
<li>❌ <code>ANYTHING.else</code></li>
</ul>
<h2 id="in-app-authorization">In-app Authorization</h2>
<p>The <code>{APP}_MTLS_AUTHORIZED_CERTS</code> variable does a crude form of
authorization for the app as a whole (it lets some certs in, while
rejecting others). For finer grained permissions than that, you need
to ask the app itself to do it, Traefik can&rsquo;t do it alone.</p>
<p>The <code>mtlsheader</code> middleware will forward the authenticated client
certificate name (CN) to the proxied service, via the header named
<code>X-Client-CN</code>. This is verified information that tells the backend app
the unique name of the client, based upon the signed name (CN) of the
certificate. Using this information, the application routes can do
fine grained authoriation (eg. sending http <code>200</code> or <code>403</code> codes on a
per page basis, based on user permissions stored in a database row per
name (CN)).</p>
<h2 id="creating-client-certificates">Creating client certificates</h2>
<p>You create client certificates the same way you create server
cerificates:</p>
<div class="box notices cstyle stdout">
    <div class="box-label">(stdout)</div>
    <div class="box-content">
        <pre>
d make step-ca cert
</pre>
    </div>
</div>

<p>You will be asked to enter the name (CN) which must be a name that is
allowed by your Step-CA instance.</p>
<p>You can also generate client ceritificates via ACME, if you want to
setup a client that way. Give
<a href="https://github.com/acmesh-official/acme.sh" rel="external" target="_blank">acme.sh</a> a try.</p>
<h2 id="naming-client-certificates--cn">Naming client certificates (CN)</h2>
<p>Although client certificate names do have to look like internet domain
names, but unless you&rsquo;re issuing client certificates via ACME, they do
not need to have DNS. You are free to make up whatever domain names
you want for your user certificates. However, here is a good naming
convention you may want to use, as a subdomain of the app you are
creating the certificates for:</p>
<div class="box notices cstyle stdout">
    <div class="box-label">(stdout)</div>
    <div class="box-content">
        <pre>
NAME.clients.app.example.com
</pre>
    </div>
</div>

<p>If you create your client certificates like that, they will retain a
relation back to where they are supposed to go. However, if a user
needs access to multiple apps, they will need to manage certificates.</p>
<p>A better way might be to create a central store where users have
unique IDs inside of your organization:</p>
<div class="box notices cstyle stdout">
    <div class="box-label">(stdout)</div>
    <div class="box-content">
        <pre>
NAME.users.example.com
</pre>
    </div>
</div>

<h2 id="testing-tls-with-curl">Testing TLS with curl</h2>
<p>Assuming you have already deployed <a href="/d.rymcg.tech/whoami/index.html">whoami</a> and configured
it for mTLS, and you have the following config:</p>
<div class="box notices cstyle stdout">
    <div class="box-label">(stdout)</div>
    <div class="box-content">
        <pre>
ROOT_STEP_CA_CERT=~/.step/certs/root_ca.crt
CLIENT_CERT=~/git/vendor/enigmacurry/d.rymcg.tech/step-ca/certs/tony.clients.whoami.example.com.crt
CLIENT_KEY=~/git/vendor/enigmacurry/d.rymcg.tech/step-ca/certs/tony.clients.whoami.example.com.key

WHOAMI_URL=https://whoami.example.com
</pre>
    </div>
</div>

<h2 id="test-the-root-ca">Test the root CA</h2>
<p>If your system has no trust of the Step-CA root certificate, curl will
show you this error, which is normal of any &ldquo;self-signed&rdquo; certificate:</p>
<div class="box notices cstyle stdout">
    <div class="box-label">(stdout)</div>
    <div class="box-content">
        <pre>
$ curl ${WHOAMI_URL}
curl: (60) SSL certificate problem: unable to get local issuer certificate
More details here: https://curl.se/docs/sslcerts.html

curl failed to verify the legitimacy of the server and therefore could not
establish a secure connection to it. To learn more about this situation and
how to fix it, please visit the web page mentioned above.
</pre>
    </div>
</div>

<p>It means that curl is politely refusing to show you the content
because the certificate is not trusted. However, you can bypass the
check with the <code>--insecure</code> (or <code>-k</code>) flag:</p>
<div class="box notices cstyle stdout">
    <div class="box-label">(stdout)</div>
    <div class="box-content">
        <pre>
## UNSAFE: This will bypass TLS validation entirely, allowing any certificate.
curl --insecure ${WHOAMI_URL}
</pre>
    </div>
</div>

<p>To fix this, you can add the root CA to your system trust store:</p>
<div class="box notices cstyle stdout">
    <div class="box-label">(stdout)</div>
    <div class="box-content">
        <pre>
## Only do this if you're really sure you've secured your passwords!
step-cli certificate install ${ROOT_STEP_CA_CERT}
</pre>
    </div>
</div>

<h2 id="test-mtls">Test mTLS</h2>
<p>If your server requires mTLS, but you haven&rsquo;t provided your client
certificate and key, you&rsquo;ll get this error:</p>

            <footer class="footline">
            </footer>
          </article>
        </div>
      </main>
    </div>
    <aside id="R-sidebar" class="default-animation">
      <div id="R-header-topbar" class="default-animation"></div>
      <div id="R-header-wrapper" class="default-animation">
        <div id="R-header" class="default-animation">
<img src="/img/logo.jpg" class="logo" />

        </div>

        <search><form action="/search.html" method="get">
          <div class="searchbox default-animation">
            <button class="search-detail" type="submit" title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
            <label class="a11y-only" for="R-search-by">Search</label>
            <input data-search-input id="R-search-by" name="search-by" class="search-by" type="search" placeholder="Search...">
            <button class="search-clear" type="button" data-search-clear="" title="Clear search"><i class="fas fa-times" title="Clear search"></i></button>
          </div>
        </form></search>
        <script>
          var contentLangs=['en'];
        </script>
        <script src="/js/auto-complete.js?1718170891" defer></script>
        <script src="/js/lunr/lunr.min.js?1718170891" defer></script>
        <script src="/js/lunr/lunr.stemmer.support.min.js?1718170891" defer></script>
        <script src="/js/lunr/lunr.multi.min.js?1718170891" defer></script>
        <script src="/js/lunr/lunr.en.min.js?1718170891" defer></script>
        <script src="/js/search.js?1718170891" defer></script>
      </div>
      <div id="R-homelinks" class="default-animation homelinks">
        <ul>
          <li><a class="padding" href="/index.html"><i class="fa-fw fas fa-home"></i> Home</a></li>
        </ul>
        <hr class="padding">
      </div>
      <div id="R-content-wrapper" class="highlightable">
        <div id="R-topics">
          <ul class="enlarge morespace collapsible-menu">
          <li data-nav-id="/linux-workstation/index.html" class=""><a class="padding" href="/linux-workstation/index.html">Linux Workstation</a><ul id="R-subsections-4fabcc8bf6f43bc84cc33c8d9fe1b62b" class="morespace collapsible-menu">
          <li data-nav-id="/linux-workstation/introduction/index.html" class="alwaysopen"><a class="padding" href="/linux-workstation/introduction/index.html">Introduction</a><ul id="R-subsections-247caeb1441bcea844a3ccf766ca4471" class="morespace collapsible-menu">
          <li data-nav-id="/linux-workstation/introduction/fedora-sway-atomic/index.html" class=""><a class="padding" href="/linux-workstation/introduction/fedora-sway-atomic/index.html">Fedora Sway Atomic</a></li>
          <li data-nav-id="/linux-workstation/introduction/requirements/index.html" class=""><a class="padding" href="/linux-workstation/introduction/requirements/index.html">Requirements</a></li></ul></li>
          <li data-nav-id="/linux-workstation/install/index.html" class=""><a class="padding" href="/linux-workstation/install/index.html">Install Linux (Fedora Atomic)</a></li>
          <li data-nav-id="/linux-workstation/upgrading/index.html" class=""><a class="padding" href="/linux-workstation/upgrading/index.html">Upgrading</a></li>
          <li data-nav-id="/linux-workstation/layering-packages/index.html" class=""><a class="padding" href="/linux-workstation/layering-packages/index.html">Layering packages</a></li>
          <li data-nav-id="/linux-workstation/config/index.html" class="alwaysopen"><a class="padding" href="/linux-workstation/config/index.html">Config</a><ul id="R-subsections-51edac90ba33828eb61f7465c11b4244" class="morespace collapsible-menu">
          <li data-nav-id="/linux-workstation/config/sway/index.html" class=""><a class="padding" href="/linux-workstation/config/sway/index.html">Sway</a></li>
          <li data-nav-id="/linux-workstation/config/firefox/index.html" class=""><a class="padding" href="/linux-workstation/config/firefox/index.html">Firefox</a></li>
          <li data-nav-id="/linux-workstation/config/toolbox/index.html" class=""><a class="padding" href="/linux-workstation/config/toolbox/index.html">Toolbox</a></li>
          <li data-nav-id="/linux-workstation/config/emacs-on-fedora/index.html" class=""><a class="padding" href="/linux-workstation/config/emacs-on-fedora/index.html">Emacs</a></li>
          <li data-nav-id="/linux-workstation/config/ssh/index.html" class=""><a class="padding" href="/linux-workstation/config/ssh/index.html">SSH</a></li></ul></li>
          <li data-nav-id="/linux-workstation/sudo-2fa/index.html" class="alwaysopen"><a class="padding" href="/linux-workstation/sudo-2fa/index.html">Solokey authentication</a><ul id="R-subsections-96e2330197c57518ec319a4d358386d1" class="morespace collapsible-menu">
          <li data-nav-id="/linux-workstation/sudo-2fa/get-your-solokey/index.html" class=""><a class="padding" href="/linux-workstation/sudo-2fa/get-your-solokey/index.html">Get your Solokey</a></li>
          <li data-nav-id="/linux-workstation/sudo-2fa/solo-v2/index.html" class=""><a class="padding" href="/linux-workstation/sudo-2fa/solo-v2/index.html">Solokey v2</a></li>
          <li data-nav-id="/linux-workstation/sudo-2fa/solo-v1/index.html" class=""><a class="padding" href="/linux-workstation/sudo-2fa/solo-v1/index.html">Solokey v1</a></li>
          <li data-nav-id="/linux-workstation/sudo-2fa/sudo-2fa/index.html" class=""><a class="padding" href="/linux-workstation/sudo-2fa/sudo-2fa/index.html">Sudo with Solokey</a></li>
          <li data-nav-id="/linux-workstation/sudo-2fa/ssh-2fa/index.html" class=""><a class="padding" href="/linux-workstation/sudo-2fa/ssh-2fa/index.html">SSH with Solokey</a></li></ul></li>
          <li data-nav-id="/linux-workstation/app-users/index.html" class="alwaysopen"><a class="padding" href="/linux-workstation/app-users/index.html">Application users</a><ul id="R-subsections-f5664fb1bd37f091399ca1d7ccc19fa6" class="morespace collapsible-menu">
          <li data-nav-id="/linux-workstation/app-users/digitalocean/index.html" class=""><a class="padding" href="/linux-workstation/app-users/digitalocean/index.html">DigitalOcean CLI (doctl)</a></li></ul></li>
          <li data-nav-id="/linux-workstation/kvm-libvirt/index.html" class="alwaysopen"><a class="padding" href="/linux-workstation/kvm-libvirt/index.html">KVM / libvirt</a><ul id="R-subsections-866ef10ce7233c8e220552c62acdd9fb" class="morespace collapsible-menu">
          <li data-nav-id="/linux-workstation/kvm-libvirt/install-libvirtd/index.html" class=""><a class="padding" href="/linux-workstation/kvm-libvirt/install-libvirtd/index.html">Install libvirtd</a></li>
          <li data-nav-id="/linux-workstation/kvm-libvirt/setup-libvirtd/index.html" class=""><a class="padding" href="/linux-workstation/kvm-libvirt/setup-libvirtd/index.html">Setup libvirtd</a></li>
          <li data-nav-id="/linux-workstation/kvm-libvirt/dedicated-vm-user/index.html" class=""><a class="padding" href="/linux-workstation/kvm-libvirt/dedicated-vm-user/index.html">Create VM admin</a></li>
          <li data-nav-id="/linux-workstation/kvm-libvirt/cloud-init/index.html" class="alwaysopen"><a class="padding" href="/linux-workstation/kvm-libvirt/cloud-init/index.html">Cloud-Init VMs</a><ul id="R-subsections-85e75632117660d261346e27d0e1596a" class="morespace collapsible-menu">
          <li data-nav-id="/linux-workstation/kvm-libvirt/cloud-init/config-vm/index.html" class=""><a class="padding" href="/linux-workstation/kvm-libvirt/cloud-init/config-vm/index.html">Configure VM (cloud-init)</a></li>
          <li data-nav-id="/linux-workstation/kvm-libvirt/cloud-init/create-vm/index.html" class=""><a class="padding" href="/linux-workstation/kvm-libvirt/cloud-init/create-vm/index.html">Create VM (cloud-init)</a></li></ul></li>
          <li data-nav-id="/linux-workstation/kvm-libvirt/systemd/index.html" class=""><a class="padding" href="/linux-workstation/kvm-libvirt/systemd/index.html">Systemd services to control VMs</a></li>
          <li data-nav-id="/linux-workstation/kvm-libvirt/public-routes/index.html" class=""><a class="padding" href="/linux-workstation/kvm-libvirt/public-routes/index.html">Public routes to VMs</a></li>
          <li data-nav-id="/linux-workstation/kvm-libvirt/setup-workstation/index.html" class=""><a class="padding" href="/linux-workstation/kvm-libvirt/setup-workstation/index.html">Setup workstation SSH config</a></li></ul></li>
          <li data-nav-id="/linux-workstation/firewall/index.html" class=""><a class="padding" href="/linux-workstation/firewall/index.html">Firewall</a></li></ul></li>
          <li data-nav-id="/d.rymcg.tech/index.html" class="parent "><a class="padding" href="/d.rymcg.tech/index.html">Self-hosting Docker</a><ul id="R-subsections-8a053662b5014ad6ad1762206cc0e2f9" class="morespace collapsible-menu">
          <li data-nav-id="/d.rymcg.tech/introduction/index.html" class=""><a class="padding" href="/d.rymcg.tech/introduction/index.html">Introduction</a></li>
          <li data-nav-id="/d.rymcg.tech/required-infrastructure/index.html" class="alwaysopen"><a class="padding" href="/d.rymcg.tech/required-infrastructure/index.html">Required Infrastructure</a><ul id="R-subsections-850ccad8337ba16ba7e92d565f4fea56" class="morespace collapsible-menu">
          <li data-nav-id="/d.rymcg.tech/required-infrastructure/register-a-domain-nameom/index.html" class=""><a class="padding" href="/d.rymcg.tech/required-infrastructure/register-a-domain-nameom/index.html">Register a domain name</a></li>
          <li data-nav-id="/d.rymcg.tech/required-infrastructure/setup-dns/index.html" class=""><a class="padding" href="/d.rymcg.tech/required-infrastructure/setup-dns/index.html">Setup public DNS service</a></li>
          <li data-nav-id="/d.rymcg.tech/required-infrastructure/public-docker-server/index.html" class=""><a class="padding" href="/d.rymcg.tech/required-infrastructure/public-docker-server/index.html">Create a public server (VPS)</a></li>
          <li data-nav-id="/d.rymcg.tech/required-infrastructure/private-docker-server/index.html" class=""><a class="padding" href="/d.rymcg.tech/required-infrastructure/private-docker-server/index.html">Create a private server (libvirt VM)</a></li></ul></li>
          <li data-nav-id="/d.rymcg.tech/workstation/index.html" class="alwaysopen"><a class="padding" href="/d.rymcg.tech/workstation/index.html">Setup your workstation</a><ul id="R-subsections-4a12c34b2fece93fc397ecf3de950464" class="morespace collapsible-menu">
          <li data-nav-id="/d.rymcg.tech/workstation/install-docker-command-line-tools/index.html" class=""><a class="padding" href="/d.rymcg.tech/workstation/install-docker-command-line-tools/index.html">Install Docker client tools</a></li>
          <li data-nav-id="/d.rymcg.tech/workstation/install-d-rymcg-tech/index.html" class=""><a class="padding" href="/d.rymcg.tech/workstation/install-d-rymcg-tech/index.html">Install d.rymcg.tech tools</a></li></ul></li>
          <li data-nav-id="/d.rymcg.tech/docker-context/index.html" class="alwaysopen"><a class="padding" href="/d.rymcg.tech/docker-context/index.html">Setup Docker context</a><ul id="R-subsections-0b3f5dbeb4ee162d09e37caaf65b1f43" class="morespace collapsible-menu">
          <li data-nav-id="/d.rymcg.tech/docker-context/ssh-config-and-docker-context/index.html" class=""><a class="padding" href="/d.rymcg.tech/docker-context/ssh-config-and-docker-context/index.html">Create context</a></li>
          <li data-nav-id="/d.rymcg.tech/docker-context/install-docker-on-remote-host/index.html" class=""><a class="padding" href="/d.rymcg.tech/docker-context/install-docker-on-remote-host/index.html">Install Docker</a></li>
          <li data-nav-id="/d.rymcg.tech/docker-context/main-config-for-d.rymcg/index.html" class=""><a class="padding" href="/d.rymcg.tech/docker-context/main-config-for-d.rymcg/index.html">Setup d.rymcg.tech</a></li></ul></li>
          <li data-nav-id="/d.rymcg.tech/traefik-proxy/index.html" class="alwaysopen"><a class="padding" href="/d.rymcg.tech/traefik-proxy/index.html">Traefik Proxy</a><ul id="R-subsections-e5faef2e23bdb87f9fe5fba855380f02" class="morespace collapsible-menu">
          <li data-nav-id="/d.rymcg.tech/traefik-proxy/scenarios/index.html" class="alwaysopen"><a class="padding" href="/d.rymcg.tech/traefik-proxy/scenarios/index.html">Traefik Scenarios</a><ul id="R-subsections-dfc498c87b9d757fa5891043e3c908fe" class="morespace collapsible-menu">
          <li data-nav-id="/d.rymcg.tech/traefik-proxy/scenarios/minimal/index.html" class=""><a class="padding" href="/d.rymcg.tech/traefik-proxy/scenarios/minimal/index.html">Minimal Traefik</a></li>
          <li data-nav-id="/d.rymcg.tech/traefik-proxy/scenarios/vps-lets-encrypt-tls-challenge/index.html" class=""><a class="padding" href="/d.rymcg.tech/traefik-proxy/scenarios/vps-lets-encrypt-tls-challenge/index.html">Let&#39;s Encrypt TLS challenge</a></li>
          <li data-nav-id="/d.rymcg.tech/traefik-proxy/scenarios/vps-lets-encrypt-dns-challenge/index.html" class=""><a class="padding" href="/d.rymcg.tech/traefik-proxy/scenarios/vps-lets-encrypt-dns-challenge/index.html">Let&#39;s Encrypt DNS challenge</a></li>
          <li data-nav-id="/d.rymcg.tech/traefik-proxy/scenarios/step-ca-tls-challenge/index.html" class=""><a class="padding" href="/d.rymcg.tech/traefik-proxy/scenarios/step-ca-tls-challenge/index.html">Step-CA TLS challenge</a></li>
          <li data-nav-id="/d.rymcg.tech/traefik-proxy/scenarios/step-ca-dns-challenge/index.html" class=""><a class="padding" href="/d.rymcg.tech/traefik-proxy/scenarios/step-ca-dns-challenge/index.html">Step-CA DNS challenge</a></li>
          <li data-nav-id="/d.rymcg.tech/traefik-proxy/scenarios/wireguard-layer-7-server/index.html" class=""><a class="padding" href="/d.rymcg.tech/traefik-proxy/scenarios/wireguard-layer-7-server/index.html">Wireguard layer 7 proxy</a></li>
          <li data-nav-id="/d.rymcg.tech/traefik-proxy/scenarios/wireguard-layer-7-client/index.html" class=""><a class="padding" href="/d.rymcg.tech/traefik-proxy/scenarios/wireguard-layer-7-client/index.html">Wireguard layer 7 client</a></li>
          <li data-nav-id="/d.rymcg.tech/traefik-proxy/scenarios/wireguard-layer-4-client/index.html" class=""><a class="padding" href="/d.rymcg.tech/traefik-proxy/scenarios/wireguard-layer-4-client/index.html">Wireguard layer 4 client</a></li></ul></li></ul></li>
          <li data-nav-id="/d.rymcg.tech/whoami/index.html" class=""><a class="padding" href="/d.rymcg.tech/whoami/index.html">Whoami</a></li>
          <li data-nav-id="/d.rymcg.tech/step-ca/index.html" class="parent alwaysopen"><a class="padding" href="/d.rymcg.tech/step-ca/index.html">Step-CA</a><ul id="R-subsections-fdb0b93fb7da7fa9393abed3c5b7c9b1" class="morespace collapsible-menu">
          <li data-nav-id="/d.rymcg.tech/step-ca/install/index.html" class=""><a class="padding" href="/d.rymcg.tech/step-ca/install/index.html">Install Step-CA</a></li>
          <li data-nav-id="/d.rymcg.tech/step-ca/certificates/index.html" class=""><a class="padding" href="/d.rymcg.tech/step-ca/certificates/index.html">Create Certificates</a></li>
          <li data-nav-id="/d.rymcg.tech/step-ca/tls-clients/index.html" class=""><a class="padding" href="/d.rymcg.tech/step-ca/tls-clients/index.html">Configure TLS clients</a></li>
          <li data-nav-id="/d.rymcg.tech/step-ca/root-ca-passphrase/index.html" class=""><a class="padding" href="/d.rymcg.tech/step-ca/root-ca-passphrase/index.html">Change Root CA Passphrase</a></li>
          <li data-nav-id="/d.rymcg.tech/step-ca/acme/index.html" class=""><a class="padding" href="/d.rymcg.tech/step-ca/acme/index.html">ACME</a></li>
          <li data-nav-id="/d.rymcg.tech/step-ca/mtls/index.html" class="active"><a class="padding" href="/d.rymcg.tech/step-ca/mtls/index.html">Mutual TLS</a></li></ul></li></ul></li>
          <li data-nav-id="/publishing-with-org-mode/index.html" class=""><a class="padding" href="/publishing-with-org-mode/index.html">Publishing with org-mode</a><ul id="R-subsections-415a59a995a98556d7692b05dd8d304c" class="morespace collapsible-menu">
          <li data-nav-id="/publishing-with-org-mode/dependencies/index.html" class=""><a class="padding" href="/publishing-with-org-mode/dependencies/index.html">Dependencies</a></li>
          <li data-nav-id="/publishing-with-org-mode/building-locally/index.html" class=""><a class="padding" href="/publishing-with-org-mode/building-locally/index.html">Building locally</a></li>
          <li data-nav-id="/publishing-with-org-mode/publish-with-github-pages/index.html" class=""><a class="padding" href="/publishing-with-org-mode/publish-with-github-pages/index.html">Publishing with GitHub pages</a></li>
          <li data-nav-id="/publishing-with-org-mode/publish-with-sftp/index.html" class=""><a class="padding" href="/publishing-with-org-mode/publish-with-sftp/index.html">Publishing with SFTP</a></li>
          <li data-nav-id="/publishing-with-org-mode/org-mode-emacs/index.html" class="alwaysopen"><a class="padding" href="/publishing-with-org-mode/org-mode-emacs/index.html">Using Org-mode and Emacs</a><ul id="R-subsections-f93c6166e26669592c85e9cf02707646" class="morespace collapsible-menu">
          <li data-nav-id="/publishing-with-org-mode/org-mode-emacs/navigating-org-mode/index.html" class=""><a class="padding" href="/publishing-with-org-mode/org-mode-emacs/navigating-org-mode/index.html">Navigating Org-mode files</a></li>
          <li data-nav-id="/publishing-with-org-mode/org-mode-emacs/editing-org-mode/index.html" class=""><a class="padding" href="/publishing-with-org-mode/org-mode-emacs/editing-org-mode/index.html">Editing Org-mode files</a></li></ul></li>
          <li data-nav-id="/publishing-with-org-mode/examples/index.html" class="alwaysopen"><a class="padding" href="/publishing-with-org-mode/examples/index.html">Example Org / Hugo content</a><ul id="R-subsections-21525f33c1956ce3844918973388ff0a" class="morespace collapsible-menu">
          <li data-nav-id="/publishing-with-org-mode/examples/org-blocks/index.html" class=""><a class="padding" href="/publishing-with-org-mode/examples/org-blocks/index.html">Example Org Blocks</a></li>
          <li data-nav-id="/publishing-with-org-mode/examples/shortcodes/index.html" class=""><a class="padding" href="/publishing-with-org-mode/examples/shortcodes/index.html">Example Shortcodes</a></li>
          <li data-nav-id="/publishing-with-org-mode/examples/deeply/index.html" class="alwaysopen"><a class="padding" href="/publishing-with-org-mode/examples/deeply/index.html">Example of a deeply …</a><ul id="R-subsections-5c8cebe1226c6de44ad55152efdb64aa" class="morespace collapsible-menu">
          <li data-nav-id="/publishing-with-org-mode/examples/deeply/nested/index.html" class="alwaysopen"><a class="padding" href="/publishing-with-org-mode/examples/deeply/nested/index.html">Nested …</a><ul id="R-subsections-b3d8d366e5b04e51fbfcb8de77d01482" class="morespace collapsible-menu">
          <li data-nav-id="/publishing-with-org-mode/examples/deeply/nested/subchapters/subchapter1/index.html" class=""><a class="padding" href="/publishing-with-org-mode/examples/deeply/nested/subchapters/subchapter1/index.html">Sub-chapter 1</a></li>
          <li data-nav-id="/publishing-with-org-mode/examples/deeply/nested/subchapters/subchapter2/index.html" class=""><a class="padding" href="/publishing-with-org-mode/examples/deeply/nested/subchapters/subchapter2/index.html">Sub-chapter 2</a></li>
          <li data-nav-id="/publishing-with-org-mode/examples/deeply/nested/subchapters/subchapter3/index.html" class=""><a class="padding" href="/publishing-with-org-mode/examples/deeply/nested/subchapters/subchapter3/index.html">Sub-chapter 3</a></li></ul></li></ul></li></ul></li></ul></li>
          <li data-nav-id="/license/index.html" class=""><a class="padding" href="/license/index.html">LICENSE</a></li>
          </ul>
        </div>
        <div class="padding footermargin footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showVariantSwitch showFooter"></div>
        <div id="R-menu-footer">
          <hr class="padding default-animation footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showVariantSwitch showFooter">
          <div id="R-prefooter" class="footerLangSwitch footerVariantSwitch footerVisitedLinks showVariantSwitch">
            <ul>
              <li id="R-select-language-container" class="footerLangSwitch">
                <div class="padding menu-control">
                  <i class="fa-fw fas fa-language"></i>
                  <span>&nbsp;</span>
                  <div class="control-style">
                    <label class="a11y-only" for="R-select-language">Language</label>
                    <select id="R-select-language" onchange="location = this.querySelector( this.value ).dataset.url;">
                      <option id="R-select-language-en" value="#R-select-language-en" data-url="/d.rymcg.tech/step-ca/mtls/index.html" lang="en-us" selected></option>
                    </select>
                  </div>
                  <div class="clear"></div>
                </div>
              </li>
              <li id="R-select-variant-container" class="footerVariantSwitch showVariantSwitch">
                <div class="padding menu-control">
                  <i class="fa-fw fas fa-paint-brush"></i>
                  <span>&nbsp;</span>
                  <div class="control-style">
                    <label class="a11y-only" for="R-select-variant">Theme</label>
                    <select id="R-select-variant" onchange="window.variants && variants.changeVariant( this.value );">
                      <option id="R-select-variant-zen-auto" value="zen-auto" selected>Zen Light/Dark</option>
                      <option id="R-select-variant-zen-light" value="zen-light">Zen Light</option>
                      <option id="R-select-variant-zen-dark" value="zen-dark">Zen Dark</option>
                      <option id="R-select-variant-relearn-auto" value="relearn-auto">Relearn Light/Dark</option>
                      <option id="R-select-variant-relearn-light" value="relearn-light">Relearn Light</option>
                      <option id="R-select-variant-relearn-dark" value="relearn-dark">Relearn Dark</option>
                      <option id="R-select-variant-relearn-bright" value="relearn-bright">Relearn Bright</option>
                      <option id="R-select-variant-neon" value="neon">Neon</option>
                      <option id="R-select-variant-learn" value="learn">Learn</option>
                      <option id="R-select-variant-blue" value="blue">Blue</option>
                      <option id="R-select-variant-green" value="green">Green</option>
                      <option id="R-select-variant-red" value="red">Red</option>
                    </select>
                  </div>
                  <div class="clear"></div>
                </div>
                <script>window.variants && variants.markSelectedVariant();</script>
              </li>
              <li class="footerVisitedLinks">
                <div class="padding menu-control">
                  <i class="fa-fw fas fa-history"></i>
                  <span>&nbsp;</span>
                  <div class="control-style">
                    <button onclick="clearHistory();">Clear History</button>
                  </div>
                  <div class="clear"></div>
                </div>
              </li>
            </ul>
          </div>
          <div id="R-footer" class="footerFooter showFooter">Build: Jun 12, 2024 at 5:41am (UTC)

          </div>
        </div>
      </div>
    </aside>
    <script src="/js/clipboard.min.js?1718170891" defer></script>
    <script src="/js/perfect-scrollbar.min.js?1718170891" defer></script>
    <script src="/js/theme.js?1718170891" defer></script>
  </body>
</html>
