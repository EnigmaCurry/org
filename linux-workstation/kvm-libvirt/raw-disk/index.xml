<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Raw disk VMs :: book.rymcg.tech</title>
    <link>https://book.rymcg.tech/linux-workstation/kvm-libvirt/raw-disk/index.html</link>
    <description>If you OS is not packaged as a cloud-init enabled image, you can boot a raw disk image instead. The example will install Fedora IoT (40) from raw disk image.&#xA;Index </description>
    <generator>Hugo</generator>
    <language>en-us</language>
    <atom:link href="https://book.rymcg.tech/linux-workstation/kvm-libvirt/raw-disk/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Configure VM (raw disk)</title>
      <link>https://book.rymcg.tech/linux-workstation/kvm-libvirt/raw-disk/config/index.html</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://book.rymcg.tech/linux-workstation/kvm-libvirt/raw-disk/config/index.html</guid>
      <description>Configure VM with raw disk image [bash]: Set temporary environment variables RAW_DISK=https://download.fedoraproject.org/pub/alt/iot/40/IoT/x86_64/images/Fedora-IoT-raw-40-20240422.3.x86_64.raw.xz NAME=fedora-iot OS_VARIANT=fedora40 MEMORY=2048 CPUS=2 DISK_SIZE=30 IP_ADDRESS=192.168.122.6 MAC_ADDRESS=$(printf &#39;00:60:2F:%02X:%02X:%02X\n&#39; $[RANDOM%256] $[RANDOM%256] | tr &#39;[:upper:]&#39; &#39;[:lower:]&#39;) Create DHCP lease [bash]: Run this on your workstation: sudo virsh net-update default add-last ip-dhcp-host &#34;&lt;host mac=&#39;${MAC_ADDRESS}&#39; name=&#39;${NAME}&#39; ip=&#39;${IP_ADDRESS}&#39; /&gt;&#34; --live --config --parent-index 0 Copy config to libvirt-user account [bash]: Run this on your workstation: TMP_ENV=$(mktemp) cat &lt;&lt; EOF &gt; ${TMP_ENV} export NAME=${NAME} export OS_VARIANT=${OS_VARIANT} export IP_ADDRESS=${IP_ADDRESS} export MAC_ADDRESS=${MAC_ADDRESS} export RAW_DISK=${RAW_DISK} export MEMORY=${MEMORY} export CPUS=${CPUS} export DISK_SIZE=${DISK_SIZE} EOF chmod a+r ${TMP_ENV} sudo su ${VM_ADMIN:-libvirt-admin} -c \ &#34;</description>
    </item>
    <item>
      <title>Create VM (raw disk)</title>
      <link>https://book.rymcg.tech/linux-workstation/kvm-libvirt/raw-disk/create-vm/index.html</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>https://book.rymcg.tech/linux-workstation/kvm-libvirt/raw-disk/create-vm/index.html</guid>
      <description>Info For this entire section you need to perform the VM config as the libvirt-admin user.&#xA;Login to the shell account of libvirt-admin:&#xA;[bash]: Run this on your workstation: sudo su libvirt-admin -l Source the config Now, and anytime you come back later to work on the same VM, source the config file:&#xA;Run this as the libvirt-admin user NAME=fedora-iot source ~/libvirt/${NAME}.env Create directories to hold the VM disks and config files: Run this as the libvirt-admin user mkdir -p ~/libvirt/{cloud-images,raw,disks,cloud-init,iso} Download the raw disk: Tip You only need to download each RAW_DISK once, they will be cached in ~/libvirt/raw, so they can be be reused.</description>
    </item>
  </channel>
</rss>